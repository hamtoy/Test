============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\우리집\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: C:\shining-quasar
configfile: pyproject.toml
plugins: anyio-4.11.0, langsmith-0.4.46, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 4 items / 2 deselected / 2 selected
run-last-failure: rerun previous 2 failures (skipped 70 files)

tests/test_agent_cost_logging.py::test_execute_api_call_logs_metrics FAILED [ 50%]
tests/test_agent_extended.py::test_agent_execute_api_call_safety_error FAILED [100%]

================================== FAILURES ===================================
_____________________ test_execute_api_call_logs_metrics ______________________
tests\test_agent_cost_logging.py:82: in test_execute_api_call_logs_metrics
    assert logged["prompt_tokens"] == 10
           ^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'prompt_tokens'
__________________ test_agent_execute_api_call_safety_error ___________________
tests\test_agent_extended.py:65: in test_agent_execute_api_call_safety_error
    with pytest.raises(ag.SafetyFilterError):
                       ^^^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'src.agent' has no attribute 'SafetyFilterError'
=========================== short test summary info ===========================
FAILED tests/test_agent_cost_logging.py::test_execute_api_call_logs_metrics
FAILED tests/test_agent_extended.py::test_agent_execute_api_call_safety_error
======================= 2 failed, 2 deselected in 2.86s =======================
