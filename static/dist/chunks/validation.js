class i extends Error{constructor(e,n){super(`${e}: ${n}`),this.field=e,this.name="ValidationError"}}function c(t){if(!t||typeof t!="object")throw new i("payload","요청 데이터가 객체여야 합니다");const e=t;if(!e.mode||typeof e.mode!="string")throw new i("mode","필수 필드 누락 또는 타입 오류 (문자열 필요)");const n=["single","batch","batch_three"];if(!n.includes(e.mode))throw new i("mode",`유효하지 않은 값: "${e.mode}". 가능한 값: ${n.join(", ")}`);if(e.ocr_text!==void 0&&e.ocr_text!==null&&typeof e.ocr_text!="string")throw new i("ocr_text","문자열이어야 합니다");if(e.mode==="single"){if(!e.qtype||typeof e.qtype!="string")throw new i("qtype","single 모드에서는 qtype이 필수입니다 (문자열)");const o=["global_explanation","explanation","globalexplanation","reasoning","target_short","target_long","target"];if(!o.includes(e.qtype))throw new i("qtype",`유효하지 않은 값: "${e.qtype}". 가능한 값: ${o.slice(0,6).join(", ")}`)}if(e.batch_types!==void 0&&e.batch_types!==null){if(!Array.isArray(e.batch_types))throw new i("batch_types","배열이어야 합니다");for(let o=0;o<e.batch_types.length;o++)if(typeof e.batch_types[o]!="string")throw new i(`batch_types[${o}]`,"모든 요소가 문자열이어야 합니다")}}function p(t){if(!t||typeof t!="object")throw new i("payload","요청 데이터가 객체여야 합니다");const e=t,n=["mode","query","answer","edit_request","ocr_text","query_type","global_explanation_ref"];for(const o of n){const r=e[o];if(r!=null&&typeof r!="string")throw new i(o,`문자열이어야 합니다. 받은 타입: ${typeof r}`)}if(e.query_type&&typeof e.query_type=="string"){const o=["global_explanation","explanation","globalexplanation","reasoning","target_short","target_long","target"];if(!o.includes(e.query_type))throw new i("query_type",`유효하지 않은 값: "${e.query_type}". 가능한 값: ${o.slice(0,6).join(", ")}`)}}function y(t){if(!t||typeof t!="object")return[];const e=[],n=t,o={ocrText:"ocr_text",queryType:"query_type",editRequest:"edit_request",batchTypes:"batch_types",globalExplanationRef:"global_explanation_ref"};for(const[r,s]of Object.entries(o))r in n&&e.push(`⚠️ 필드명 오타: "${r}" → 올바른 필드명: "${s}" (snake_case 사용)`);return e}function f(t,e){const n=y(t);if(n.length>0)throw new i("field_names",n.join(`
`));e.includes("/api/qa/generate")?c(t):e.includes("/api/workspace/unified")&&p(t)}function u(t){if(!t||typeof t!="object")return"요청 데이터 검증 실패";const e=t;return Array.isArray(e.detail)?`요청 데이터 검증 실패:
${e.detail.map(r=>{var a;const s=((a=r.loc)==null?void 0:a.slice(1).join("."))||"unknown",l=r.msg||"validation error";return`• ${s}: ${l}`}).join(`
`)}`:typeof e.detail=="string"?e.detail:"요청 데이터 검증 실패"}export{i as ValidationError,y as checkFieldNames,u as parse422Error,c as validateGenerateQARequest,f as validateRequest,p as validateUnifiedWorkspaceRequest};
//# sourceMappingURL=validation.js.map
