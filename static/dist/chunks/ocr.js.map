{"version":3,"file":"ocr.js","sources":["../../ocr.ts"],"sourcesContent":["import { apiCall, showToast } from \"./utils.js\";\r\n\r\ninterface OcrResponse {\n    ocr?: string;\n}\n\r\nexport async function loadOCR(targetId: string = \"ocr-input\"): Promise<void> {\r\n    const input =\r\n        document.getElementById(targetId) ||\r\n        document.getElementById(\"ocr-preview\");\r\n    if (!input) {\r\n        console.error(\"OCR element not found\");\r\n        return;\r\n    }\r\n    try {\r\n        const data = await apiCall<OcrResponse>(\"/api/ocr\");\r\n        const value = data.ocr || \"\";\r\n        if (input.tagName === \"TEXTAREA\") {\r\n            (input as HTMLTextAreaElement).value = value;\r\n            if (!value) {\r\n                (input as HTMLTextAreaElement).placeholder = \"OCR 파일이 없습니다. 텍스트를 직접 입력하세요...\";\r\n            }\r\n        } else {\r\n            input.textContent = value || \"OCR 파일이 없습니다.\";\r\n            if (!value) input.style.color = \"#999\";\r\n        }\r\n    } catch (error: unknown) {\n        if (input.tagName === \"TEXTAREA\") {\n            (input as HTMLTextAreaElement).value = \"\";\n            (input as HTMLTextAreaElement).placeholder = \"OCR 로드 실패\";\n        } else {\r\n            input.textContent = \"OCR 로드 실패\";\r\n        }\r\n    }\r\n}\r\n\r\nexport async function saveOCR(sourceId: string = \"ocr-input\", statusId: string = \"ocr-save-status\"): Promise<void> {\r\n    const input = document.getElementById(sourceId) as HTMLTextAreaElement;\r\n    if (!input) {\r\n        console.error(\"OCR source not found\");\r\n        return;\r\n    }\r\n    const statusEl = document.getElementById(statusId);\r\n    try {\r\n        await apiCall(\"/api/ocr\", \"POST\", { text: input.value });\r\n        if (statusEl) {\r\n            statusEl.textContent = \"✅ 저장됨\";\r\n            statusEl.className = \"status-text success\";\r\n            setTimeout(() => (statusEl.textContent = \"\"), 2000);\r\n        }\r\n    } catch (error: unknown) {\n        if (statusEl) {\n            statusEl.textContent = \"❌ 저장 실패\";\n            statusEl.className = \"status-text error\";\n        } else {\n            const message =\n                error instanceof Error ? error.message : \"알 수 없는 오류가 발생했습니다.\";\n            showToast(\"OCR 저장 실패: \" + message, \"error\");\n        }\n    }\n}\n"],"names":["loadOCR","targetId","input","value","apiCall","saveOCR","sourceId","statusId","statusEl","error","message","showToast"],"mappings":"qCAMA,eAAsBA,EAAQC,EAAmB,YAA4B,CACzE,MAAMC,EACF,SAAS,eAAeD,CAAQ,GAChC,SAAS,eAAe,aAAa,EACzC,GAAI,CAACC,EAAO,CACR,QAAQ,MAAM,uBAAuB,EACrC,MACJ,CACA,GAAI,CAEA,MAAMC,GADO,MAAMC,EAAqB,UAAU,GAC/B,KAAO,GACtBF,EAAM,UAAY,YACjBA,EAA8B,MAAQC,EAClCA,IACAD,EAA8B,YAAc,oCAGjDA,EAAM,YAAcC,GAAS,gBACxBA,IAAOD,EAAM,MAAM,MAAQ,QAExC,MAAyB,CACjBA,EAAM,UAAY,YACjBA,EAA8B,MAAQ,GACtCA,EAA8B,YAAc,aAE7CA,EAAM,YAAc,WAE5B,CACJ,CAEA,eAAsBG,EAAQC,EAAmB,YAAaC,EAAmB,kBAAkC,CAC/G,MAAML,EAAQ,SAAS,eAAeI,CAAQ,EAC9C,GAAI,CAACJ,EAAO,CACR,QAAQ,MAAM,sBAAsB,EACpC,MACJ,CACA,MAAMM,EAAW,SAAS,eAAeD,CAAQ,EACjD,GAAI,CACA,MAAMH,EAAQ,WAAY,OAAQ,CAAE,KAAMF,EAAM,MAAO,EACnDM,IACAA,EAAS,YAAc,QACvBA,EAAS,UAAY,sBACrB,WAAW,IAAOA,EAAS,YAAc,GAAK,GAAI,EAE1D,OAASC,EAAgB,CACrB,GAAID,EACAA,EAAS,YAAc,UACvBA,EAAS,UAAY,wBAClB,CACH,MAAME,EACFD,aAAiB,MAAQA,EAAM,QAAU,qBAC7CE,EAAU,cAAgBD,EAAS,OAAO,CAC9C,CACJ,CACJ"}