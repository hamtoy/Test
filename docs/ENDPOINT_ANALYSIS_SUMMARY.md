# μ—”λ“ν¬μΈνΈ λ¶„μ„ μ”μ•½

μ΄ λ¬Έμ„λ” "μ©λ„λ¥Ό λ¨λ¥΄λ” μ½”λ“" μ΄μμ— λ€ν• λ¶„μ„ κ²°κ³Όλ¥Ό μ”μ•½ν•©λ‹λ‹¤.

## π― λ¶„μ„ κ²°κ³Ό

### μ‚¬μ©μμ μ›λ μ§λ¬Έ/μ°λ ¤μ‚¬ν•­

> "μ©λ„λ¥Ό λ¨λ¥΄λ” μ½”λ“κ°€ μλ”κ±° κ°™μ€λ° μ–΄λ–»κ² ν•΄μ•Ό λλ” κ±°μ§€?"

μ‚¬μ©μλ” λ‹¤μ νμΌλ“¤μ΄ λ―Έμ‚¬μ©μ΄λΌκ³  μƒκ°ν–μµλ‹λ‹¤:
1. `qa_evaluation.py` - "μ–΄λ””μ—λ„ λ“±λ΅ μ• λ¨ (μ£½μ€ μ½”λ“)"
2. `workspace_unified.py` - "μ„μΉ/μ©λ„ λ¶λ…ν™•"

### μ‹¤μ  λ¶„μ„ κ²°κ³Ό

**β… μ‹¤μ λ΅ μ›Ήμ•±μ—μ„ μ‚¬μ© μ¤‘:**

| νμΌ | μ—”λ“ν¬μΈνΈ | μ›Ή νμ΄μ§€ | ν”„λ΅ νΈμ—”λ“ νμΌ |
|-----|-----------|----------|---------------|
| `qa_evaluation.py` | `POST /api/eval/external` | `/eval` | `static/dist/chunks/eval.js` |
| `workspace_unified.py` | `POST /api/workspace/unified` | `/workspace` | `static/dist/chunks/workspace.js` |

**β μ›Ή ν”„λ΅ νΈμ—”λ“μ—μ„ λ―Έμ‚¬μ© (API μ „μ©):**

| νμΌ | μ—”λ“ν¬μΈνΈ | μƒνƒ |
|-----|-----------|------|
| `workspace_generation.py` | `POST /api/workspace/generate-answer` | ν…μ¤νΈ μ΅΄μ¬, μ›Ή UI λ―Έμ‚¬μ© |
| `workspace_generation.py` | `POST /api/workspace/generate-query` | ν…μ¤νΈ μ΅΄μ¬, μ›Ή UI λ―Έμ‚¬μ© |
| `workspace_review.py` | `POST /api/workspace` | ν…μ¤νΈ μ΅΄μ¬, μ›Ή UI λ―Έμ‚¬μ© |

## π“ μν–‰ν• μ‘μ—…

### 1. κ° λΌμ°ν„° νμΌμ— λ¬Έμ„ν™” μ¶”κ°€

λ¨λ“  λΌμ°ν„° νμΌ μƒλ‹¨μ— λ‹¤μ μ •λ³΄λ¥Ό ν¬ν•¨ν• docstringμ„ μ¶”κ°€ν–μµλ‹λ‹¤:
- μ›Ήμ•± μ‚¬μ© μ—¬λ¶€ (β… ν™μ„± μ‚¬μ© μ¤‘ / β μ›Ή ν”„λ΅ νΈμ—”λ“ λ―Έμ‚¬μ©)
- μ›Ή νμ΄μ§€ κ²½λ΅
- ν”„λ΅ νΈμ—”λ“ JS νμΌ
- μ—”λ“ν¬μΈνΈ κ²½λ΅
- μ©λ„ μ„¤λ…

**μμ‹ (qa_evaluation.py):**
```python
"""QA ν‰κ°€ μ—”λ“ν¬μΈνΈ.

μ›Ήμ•± μ‚¬μ© μ—¬λ¶€: β… ν™μ„± μ‚¬μ© μ¤‘

- μ›Ή νμ΄μ§€: /eval (templates/web/eval.html)
- ν”„λ΅ νΈμ—”λ“: static/dist/chunks/eval.js
- μ—”λ“ν¬μΈνΈ: POST /api/eval/external
- μ©λ„: μ™Έλ¶€ λ‹µλ³€ 3κ° ν‰κ°€ λ° μµμ  λ‹µλ³€ μ„ νƒ
"""
```

### 2. μΆ…ν•© κ°€μ΄λ“ λ¬Έμ„ μ‘μ„±

`docs/WEB_API_ENDPOINTS.md` νμΌμ„ μƒμ„±ν•μ—¬ λ‹¤μ λ‚΄μ©μ„ ν¬ν•¨ν–μµλ‹λ‹¤:
- λ¨λ“  μ—”λ“ν¬μΈνΈμ μ‚¬μ© ν„ν™© λ§¤νΈλ¦­μ¤
- μ›Ή νμ΄μ§€λ³„ μ‚¬μ© μ—”λ“ν¬μΈνΈ λ©λ΅
- API μ „μ© μ—”λ“ν¬μΈνΈ μ‚¬μ© μμ‹
- μ•„ν‚¤ν…μ² λ³€κ²½ νμ¤ν† λ¦¬ (workspace ν†µν•©)
- ν™•μΈ λ°©λ²• κ°€μ΄λ“

## π” μ¤‘μ”ν• λ°κ²¬μ‚¬ν•­

### qa_evaluation.pyλ” μ‚¬μ© μ¤‘μ…λ‹λ‹¤!

μ‚¬μ©μκ°€ "μ£½μ€ μ½”λ“"λΌκ³  μƒκ°ν–μ§€λ§, μ‹¤μ λ΅λ”:
- β… `src/web/routers/qa.py`μ— λ“±λ΅λμ–΄ μμ
- β… λ„¤λΉ„κ²μ΄μ… λ©”λ‰΄μ— "ν‰κ°€" λ§ν¬ μ΅΄μ¬ (`templates/web/layout.html`)
- β… `/eval` νμ΄μ§€μ—μ„ ν™λ°ν μ‚¬μ© μ¤‘
- β… `static/dist/chunks/eval.js`μ—μ„ API νΈμ¶

### workspace_unified.pyλ„ λ…ν™•ν• μ©λ„κ°€ μμµλ‹λ‹¤!

- β… μ›ν¬μ¤νμ΄μ¤ νμ΄μ§€μ **λ©”μΈ μ—”λ“ν¬μΈνΈ**
- β… WorkspaceExecutor κΈ°λ° ν†µν•© μ›ν¬ν”λ΅μ° μ²λ¦¬
- β… λ¨λ“  μ›ν¬ν”λ΅μ° νƒ€μ… μλ™ κ°μ§€ (full_generation, query_generation, answer_generation, rewrite, edit_query, edit_answer, edit_both)

### workspace_generation.pyμ™€ workspace_review.pyλ” λ κ±°μ‹μ…λ‹λ‹¤

μ΄ λ‘ νμΌμ€ μ›Ή ν”„λ΅ νΈμ—”λ“μ—μ„ νΈμ¶ν•μ§€ μ•μ§€λ§, λ‹¤μ μ΄μ λ΅ μ μ§€λκ³  μμµλ‹λ‹¤:
1. **ν•μ„ νΈν™μ„±**: μ§μ ‘ APIλ¥Ό νΈμ¶ν•λ” μ™Έλ¶€ ν΄λΌμ΄μ–ΈνΈκ°€ μμ„ κ°€λ¥μ„±
2. **ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€**: κΈ°μ΅΄ ν…μ¤νΈ μ½”λ“μ—μ„ μ‚¬μ©
3. **μ μ§„μ  λ§μ΄κ·Έλ μ΄μ…**: workspace_unified.pyλ΅μ μ „ν™ κ³Όμ •

## π’΅ κ¶μ¥μ‚¬ν•­

### λ‹¨κΈ°μ  μ΅°μΉ
- β… **μ™„λ£**: κ° νμΌμ μ©λ„λ¥Ό λ…ν™•ν λ¬Έμ„ν™”
- β… **μ™„λ£**: μ‚¬μ© ν„ν™© κ°€μ΄λ“ μ‘μ„±

### μ¤‘μ¥κΈ°μ  κ³ λ ¤μ‚¬ν•­

1. **workspace_generation.pyμ™€ workspace_review.py**
   - ν„μ¬: API μ „μ©μΌλ΅ μ μ§€
   - ν–¥ν›„: μ™Έλ¶€ μ‚¬μ©μκ°€ μ—†λ‹¤λ©΄ deprecated μ²λ¦¬ κ³ λ ¤
   - μ΄μ : workspace_unified.pyκ°€ λ¨λ“  κΈ°λ¥μ„ ν†µν•© μ κ³µ

2. **μƒ κΈ°λ¥ κ°λ° μ‹**
   - β… workspace κ΄€λ ¨: `/api/workspace/unified` μ‚¬μ©
   - β… QA μƒμ„±: `/api/qa/generate` μ‚¬μ©
   - β… ν‰κ°€: `/api/eval/external` μ‚¬μ©

## π”§ ν™•μΈ λ°©λ²•

ν”„λ΅ νΈμ—”λ“μ—μ„ μ‹¤μ λ΅ νΈμ¶ν•λ” μ—”λ“ν¬μΈνΈλ¥Ό ν™•μΈν•λ ¤λ©΄:

```bash
# μ›ν¬μ¤νμ΄μ¤ κ΄€λ ¨
grep -r "/api/workspace" static/dist/chunks/workspace.js

# QA κ΄€λ ¨
grep -r "/api/qa" static/dist/chunks/qa.js

# ν‰κ°€ κ΄€λ ¨
grep -r "/api/eval" static/dist/chunks/eval.js
```

## π“ κ΄€λ ¨ λ¬Έμ„

- [docs/WEB_API_ENDPOINTS.md](docs/WEB_API_ENDPOINTS.md) - μƒμ„Έν• μ—”λ“ν¬μΈνΈ μ‚¬μ© κ°€μ΄λ“
- [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md) - μ‹μ¤ν… μ•„ν‚¤ν…μ²
- [docs/BACKEND_REFACTORING.md](docs/BACKEND_REFACTORING.md) - λ°±μ—”λ“ λ¦¬ν©ν† λ§ νμ¤ν† λ¦¬

## β… κ²°λ΅ 

**μ›λ μ°λ ¤μ‚¬ν•­μ— λ€ν• λ‹µλ³€:**

1. **qa_evaluation.pyλ” μ‚¬μ© μ¤‘μ…λ‹λ‹¤** β…
   - μ£½μ€ μ½”λ“κ°€ μ•„λ‹
   - /eval νμ΄μ§€μ—μ„ ν™λ°ν μ‚¬μ© μ¤‘

2. **workspace_unified.pyμ μ©λ„λ” λ…ν™•ν•©λ‹λ‹¤** β…
   - μ›ν¬μ¤νμ΄μ¤ νμ΄μ§€μ λ©”μΈ μ—”λ“ν¬μΈνΈ
   - λ¨λ“  μ›ν¬ν”λ΅μ°λ¥Ό ν†µν•© μ²λ¦¬

3. **workspace_generation.pyμ™€ workspace_review.pyλ” λ κ±°μ‹** β οΈ
   - μ›Ή UIμ—μ„λ” λ―Έμ‚¬μ©
   - API μ§μ ‘ νΈμ¶μ©μΌλ΅ μ μ§€
   - ν•„μ”μ‹ ν–¥ν›„ deprecated μ²λ¦¬ κ°€λ¥

**μ΄ PRμ—μ„ μν–‰ν• μ‘μ—…:**
- μ½”λ“ μ‚­μ  μ—†μ (μ•μ „)
- λ¬Έμ„ν™”λ§ μ¶”κ°€ (λ¨λ“  νμΌμ μ©λ„ λ…ν™•ν™”)
- ν–¥ν›„ μμ‚¬κ²°μ •μ„ μ„ν• μ •λ³΄ μ κ³µ
